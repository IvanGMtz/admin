{% extends 'AvanzuAdminThemeBundle:layout:base-layout.html.twig' %}
{% block avanzu_document_title %}Proceso de producción{% endblock %}
{% block avanzu_page_title %}Proceso de producción{% endblock %}
{% block avanzu_page_subtitle %}{% if q is defined %}Filtrado por: {{q}}{% endif %}{% endblock %}
{% block titulo_pagina %}
<div class="modal" id="modal-design" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ingresa los datos solicitados</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="" action="{{ path('default_newordendiseno') }}" method="post">
          <label for="referencia">Nombre de la colección</label>
          <input type="text" class="form-control" name="referencia" id="ref" required />
          <label for="cantidad">Cantidad de diseños a producir</label>
          <input type="number" class="form-control" name="cantidad" id="cantidad" value="0" required />
          <label for="proceso_notas">Observaciones</label>
          <textarea class="form-control" name="notas" placeholder="" id="orden_notas" style="height: 100px"></textarea><br>
          <button type="submit" style="float:right" class="btn btn-primary" data-bs-dismiss="modal">Ok</button>
        </form>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>
<div class="modal" id="modal-production" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" style="min-width:80%">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Ingresa los datos solicitados</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form class="" action="{{ path('produccionorden_new') }}" method="post">
          <label for="referencia">Nombre de la colección</label>
          <input type="text" class="form-control" name="referencia" id="ref" required />
          <label>Costo de mano de obra:</label>
          <div class="row">
            <div class="col col-2 border border-1 p-1">
              <label for="TRAZO">TRAZO:</label>
              <input type="number" class="form-control" name="p-9" id="TRAZO" value="0"/>
            </div>
            <div class="col col-2 border border-1 p-1">
              <label for="CORTE">CORTE:</label>
              <input type="number" class="form-control" name="p-2" id="CORTE" value="0"/>
            </div>
             <div class="col col-2 border border-1 p-1">
              <label for="LAVANDERIA">LAVANDERÍA:</label>
              <input type="number" class="form-control" name="p-5" id="LAVANDERIA" value="0"/>
            </div>
            <div class="col col-2 border border-1 p-1">
              <label for="EMPAQUE">EMPAQUE:</label>
              <input type="number" class="form-control" name="p-8" id="EMPAQUE" value="0"/>
            </div>
            <div class="col col-4 border border-1 p-1">
              <label for="BORDADO">BORDADO:</label>
              <div class="row">
                <div class="col col-6">
                  <label style="font-size:small" for="BORDADO1">Puntada</label>
                  <input type="number" class="form-control" name="p_3_1" id="BORDADO1" value="0.09" style="width:70px"/>
                </div>
                <div class="col col-6">
                  <label style="font-size:small" for="BORDADO2">Pretina</label>
                  <input type="number" class="form-control" name="p_3_2" id="BORDADO2" value="0" style="width:70px"/>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col col-4 border border-1 p-1">
              <label for="CONFECCION">CONFECCIÓN:</label>
              <div class="row">
                <div class="col col-3">
                  <label style="font-size:small" for="CONFECCION1">Ensamble</label>
                  <input type="number" class="form-control" name="p_4_1" id="CONFECCION1" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="CONFECCION2">Pretina</label>
                  <input type="number" class="form-control" name="p_4_2" id="CONFECCION2" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="CONFECCION3">Fileteado</label>
                  <input type="number" class="form-control" name="p_4_3" id="CONFECCION3" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="CONFECCION4">Hilos</label>
                  <input type="number" class="form-control" name="p_4_4" id="CONFECCION4" value="0" style="width:70px"/>
                </div>
              </div>
            </div>
            <div class="col col-4 border border-1 p-1">
              <label>PRETERMINADOS:</label>
              <div class="row">
                <div class="col col-4">
                  <label style="font-size:small" for="PRETERMINADOS1">Presillas</label>
                  <input type="number" class="form-control" name="p_6_1" id="PRETERMINADOS1" value="0" style="width:70px"/>
                </div>
                <div class="col col-4">
                  <label style="font-size:small" for="PRETERMINADOS2">Ojales</label>
                  <input type="number" class="form-control" name="p_6_2" id="PRETERMINADOS2" value="0" style="width:70px"/>
                </div>
                <div class="col col-4">
                  <label style="font-size:small" for="PRETERMINADOS3">Despeluzado</label>
                  <input type="number" class="form-control" name="p_6_3" id="PRETERMINADOS3" value="0" style="width:70px"/>
                </div>
              </div>
            </div>
            <div class="col col-4 border border-1 p-1">
              <label>TERMINADOS:</label>
              <div class="row">
                <div class="col col-3">
                  <label style="font-size:small" for="PRETERMINADOS1">Taches</label>
                  <input type="number" class="form-control" name="p_7_1" id="TERMINADOS1" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="PRETERMINADOS2">Garra/Placa</label>
                  <input type="number" class="form-control" name="p_7_2" id="TERMINADOS2" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="PRETERMINADOS3">Terminado</label>
                  <input type="number" class="form-control" name="p_7_3" id="TERMINADOS3" value="0" style="width:70px"/>
                </div>
                <div class="col col-3">
                  <label style="font-size:small" for="PRETERMINADOS4">Botones</label>
                  <input type="number" class="form-control" name="p_7_4" id="TERMINADOS4" value="0" style="width:70px"/>
                </div>
              </div>
            </div>
          </div>
          <label for="proceso_notas">Observaciones</label>
          <textarea class="form-control" name="notas" placeholder="" id="orden_notas" style="height: 100px"></textarea>
          <button type="submit" class="btn btn-primary m-1" style="float:right" data-bs-dismiss="modal">Ok</button>
        </form>
      </div>
      <div class="modal-footer">

      </div>
    </div>
  </div>
</div>
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1 class="m-0">Proceso de producción</h1>
        </div><!-- /.col -->
        <div class="col-sm-6">
        </div><!-- /.col -->
      </div><!-- /.row -->
    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->
{% endblock %}
{% block avanzu_page_content %}
<div class="row">
  <div class="col-lg-3 col-6">
    <!-- small box -->
    <div class="small-box bg-warning" onclick="new_order_production()">
      <div class="inner">
        <h3>Iniciar</h3>

        <p>Proceso de producción</p>
      </div>
      <div class="icon">
        <i class="ion ion-bag"></i>
      </div>
      <a href="#!" onclick="new_order_production()" class="small-box-footer">Iniciar <i class="fas fa-check"></i></a>
    </div>
    <div class="text-center">
      <a class="btn btn-secondary" href="{{ path('produccionorden_index') }}">Ver ordenes de Producción</a>
    </div>
  </div>
  <div class="col-lg-3 col-6">
    <!-- small box -->
    <div class="small-box bg-info" onclick="new_order_design()">
      <div class="inner">
        <h3>Iniciar</h3>

        <p>Orden de Diseño</p>
      </div>
      <div class="icon">
        <i class="fas fa-female"></i>
      </div>
      <a href="#!" onclick="new_order_design()" class="small-box-footer">Iniciar <i class="fas fa-check"></i></a>
    </div>
    <div class="text-center m-1">
      <a class="btn btn-secondary" href="{{ path('disenoorden_index') }}">Ver ordenes de Diseño</a>
    </div>
  </div>
</div><br>
{% if cantidades != "[]" %} 
<div class="row" style="display:none">
  <div class="col-12">
    <div class="card bg-gradient-info collapsed-card">
    <div class="card-header border-0 ui-sortable-handle" style="cursor: move;">
        <h3 class="card-title">
          <i class="fas fa-th mr-1"></i>
          Gráfico de Producción (Cantidad/Colección)
        </h3>

        <div class="card-tools">
          <button type="button" class="btn bg-info btn-sm" data-card-widget="collapse">
            <i class="fas fa-plus"></i>
          </button>
          <button type="button" class="btn bg-info btn-sm" data-card-widget="remove">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="card-body"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
        <canvas class="chart chartjs-render-monitor" id="line-chart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 627px;" width="627" height="250"></canvas>
      </div>
    </div>
  </div>
</div>
{% endif %}
{% if tiempos != "[]" %}
<div class="row" style="display:none">
  <div class="col-12">
    <div class="card bg-gradient-success collapsed-card">
    <div class="card-header border-0 ui-sortable-handle" style="cursor: move;">
        <h3 class="card-title">
          <i class="fas fa-th mr-1"></i>
          Gráfico de Producción (Tiempo/Colección)
        </h3>

        <div class="card-tools">
          <button type="button" class="btn bg-success btn-sm" data-card-widget="collapse">
            <i class="fas fa-plus"></i>
          </button>
          <button type="button" class="btn bg-success btn-sm" data-card-widget="remove">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="card-body"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
        <canvas class="chart chartjs-render-monitor" id="line-chart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 627px;" width="627" height="250"></canvas>
      </div>
      <div class="card-footer bg-transparent">
        <div class="row">
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Corte</div>
          </div>
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Ensamble</div>
          </div>
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Terminado</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}
{% if costos != "[]" %}
<div class="row">
  <div class="col-12">
    <div class="card bg-gradient-warning collapsed-card">
    <div class="card-header border-0 ui-sortable-handle" style="cursor: move;">
        <h3 class="card-title">
          <i class="fas fa-th mr-1"></i>
          Gráfico de Producción (Costo/Colección)
        </h3>

        <div class="card-tools">
          <button type="button" class="btn bg-warning btn-sm" data-card-widget="collapse">
            <i class="fas fa-plus"></i>
          </button>
          <button type="button" class="btn bg-warning btn-sm" data-card-widget="remove">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="card-body"><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
        <canvas class="chart chartjs-render-monitor" id="line-chart3" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 627px;" width="627" height="250"></canvas>
      </div>
      <div class="card-footer bg-transparent">
        <div class="row">
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Corte</div>
          </div>
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Ensamble</div>
          </div>
          <div class="col-4 text-center">
            <div style="display:inline;width:60px;height:60px;"><canvas width="60" height="60"></canvas><input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60" data-fgcolor="#39CCCC" readonly="readonly" style="width: 34px; height: 20px; position: absolute; vertical-align: middle; margin-top: 20px; margin-left: -47px; border: 0px; background: none; font: bold 12px Arial; text-align: center; color: rgb(57, 204, 204); padding: 0px; appearance: none;"></div>

            <div class="text-white">Terminado</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}
{% endblock %}
{% block avanzu_javascripts_inline %}
  <script src="https://adminlte.io/themes/v3/plugins/chart.js/Chart.min.js"></script>
  <script src="https://adminlte.io/themes/v3/plugins/jquery-knob/jquery.knob.min.js"></script>
  <script>
  $('.knob').knob();
  var colecciones = "{{ colecciones }}";
  var tiempos = "{{ tiempos }}";
  var cantidades = "{{ cantidades }}";
  var costos = "{{ costos }}";
  var qtyGraphChartCanvas = $('#line-chart').get(0).getContext('2d')
  var qtyGraphChartData = {
    labels: JSON.parse(colecciones.replace(/&quot;/g,'"')),
    datasets: [
      {
        label: 'Cantidad Producida',
        fill: false,
        borderWidth: 2,
        lineTension: 0,
        spanGaps: true,
        borderColor: '#efefef',
        pointRadius: 3,
        pointHoverRadius: 7,
        pointColor: '#efefef',
        pointBackgroundColor: '#efefef',
        data: JSON.parse(cantidades.replace(/&quot;/g,'"'))
      }
    ]
  }
  var qtyGraphChartOptions = {
    maintainAspectRatio: false,
    responsive: true,
    legend: {
      display: false
    },
    scales: {
      xAxes: [{
        ticks: {
          fontColor: '#efefef'
        },
        gridLines: {
          display: false,
          color: '#efefef',
          drawBorder: false
        }
      }],
      yAxes: [{
        ticks: {
          stepSize: 500,
          fontColor: '#efefef'
        },
        gridLines: {
          display: true,
          color: '#efefef',
          drawBorder: false
        }
      }]
    }
  }
  var timeGraphChartCanvas = $('#line-chart2').get(0).getContext('2d')
  var timeGraphChartData = {
    labels: JSON.parse(colecciones.replace(/&quot;/g,'"')),
    datasets: [
      {
        label: 'Dias',
        fill: false,
        borderWidth: 2,
        lineTension: 0,
        spanGaps: true,
        borderColor: '#efefef',
        pointRadius: 3,
        pointHoverRadius: 7,
        pointColor: '#efefef',
        pointBackgroundColor: '#efefef',
        data: JSON.parse(tiempos.replace(/&quot;/g,'"'))
      }
    ]
  }
  var timeGraphChartOptions = {
    maintainAspectRatio: false,
    responsive: true,
    legend: {
      display: false
    },
    scales: {
      xAxes: [{
        ticks: {
          fontColor: '#efefef'
        },
        gridLines: {
          display: false,
          color: '#efefef',
          drawBorder: false
        }
      }],
      yAxes: [{
        ticks: {
          stepSize: 10,
          fontColor: '#efefef'
        },
        gridLines: {
          display: true,
          color: '#efefef',
          drawBorder: false
        }
      }]
    }
  }
  var costGraphChartCanvas = $('#line-chart3').get(0).getContext('2d')
  var costGraphChartData = {
    labels: JSON.parse(colecciones.replace(/&quot;/g,'"')),
    datasets: [
      {
        label: 'Millones COP',
        fill: false,
        borderWidth: 2,
        lineTension: 0,
        spanGaps: true,
        borderColor: 'black',
        pointRadius: 3,
        pointHoverRadius: 7,
        pointColor: 'black',
        pointBackgroundColor: 'black',
        data: JSON.parse(costos.replace(/&quot;/g,'"'))
      }
    ]
  }
  var costGraphChartOptions = {
    maintainAspectRatio: false,
    responsive: true,
    legend: {
      display: false
    },
    scales: {
      xAxes: [{
        ticks: {
          fontColor: 'black'
        },
        gridLines: {
          display: false,
          color: 'black',
          drawBorder: false
        }
      }],
      yAxes: [{
        ticks: {
          stepSize: 10,
          fontColor: 'black'
        },
        gridLines: {
          display: true,
          color: 'black',
          drawBorder: false
        }
      }]
    }
  }
  // This will get the first returned node in the jQuery collection.
  // eslint-disable-next-line no-unused-vars
  var qtyGraphChart = new Chart(qtyGraphChartCanvas, { // lgtm[js/unused-local-variable]
    type: 'line',
    data: qtyGraphChartData,
    options: qtyGraphChartOptions
  })
  var timeGraphChart = new Chart(timeGraphChartCanvas, { // lgtm[js/unused-local-variable]
    type: 'line',
    data: timeGraphChartData,
    options: timeGraphChartOptions
  })
  var costGraphChart = new Chart(costGraphChartCanvas, { // lgtm[js/unused-local-variable]
    type: 'line',
    data: costGraphChartData,
    options: costGraphChartOptions
  })
  function new_order_production(){
    $('#modal-production').modal('show');
  }
  function new_order_design(){
    $('#modal-design').modal('show');
  }
  </script>
{% endblock %}
